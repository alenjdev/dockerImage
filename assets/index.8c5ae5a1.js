import{j as f,r as d,A as w,a as D,F as x,R as _,b as y}from"./vendor.f5380977.js";const v=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}};v();const N="_container_183wa_1";var u={container:N,"container-comand":"_container-comand_183wa_7","container-date":"_container-date_183wa_18","container-text":"_container-text_183wa_24","container-button":"_container-button_183wa_30"};const s=f.exports.jsx,p=f.exports.jsxs,E=({latestImage:t,date:o,getLatestImage:r})=>p("div",{className:u.container,children:[p("div",{className:u["container-comand"],children:[s("p",{className:u["container-date"],children:o}),s("p",{className:u["container-text"],children:`V${t}`})]}),s("button",{className:u["container-button"],onClick:r,children:"Update"})]}),b=({device:t,command:o})=>{const[r,a]=d.exports.useState(".-.-.-"),[e,n]=d.exports.useState("--:--:--");d.exports.useEffect(()=>{w.addModuleDataListener(g)},[]);const i=(l,c,m)=>l+m*1e3<c,g=async l=>{const c=j(l);if(!c)return;if(i(c[0],l.time,10)){a("--:--:--"),n("--:--:--");return}a(c[1]);const h=k(c[0]);n(h)};return s(E,{getLatestImage:async()=>{t&&(t==null||t.sendCommand(o,""))},date:e,latestImage:r})};function j(t){const o=Object.values(t.streams);if(o.length===0)throw new Error("No streams.");const r=o[0];if(r===void 0)throw new Error("No stream.");if(r.loading)return;if(r.tooMuchData)throw new Error("Too much data.");if(r.data.length===0)throw new Error("No data.");const a=r.data[0].points.at(-1);if(!a)throw new Error("No datapoints.");return a}const k=t=>`${new Date(t).getHours()}:${new Date(t).getMinutes()}:${new Date(t).getSeconds()} ${new Date(t).getHours()>=12?"pm":"am"}`;function A(){const[t,o]=d.exports.useState(void 0);d.exports.useEffect(()=>{r()},[]);const r=async()=>{if(await D.waitTilAuthenticated()){const a=await x.getCurrentDevice();o(a)}};return s("div",{className:"App",children:s(b,{device:t,command:"run_docker_script"})})}_.render(s(y.StrictMode,{children:s(A,{})}),document.getElementById("root"));
