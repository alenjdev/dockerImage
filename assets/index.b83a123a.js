import{j as l,r as i,A as g,a as h,F as w,R as D,b as _}from"./vendor.f5380977.js";const x=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}};x();const y="_container_183wa_1";var d={container:y,"container-comand":"_container-comand_183wa_7","container-date":"_container-date_183wa_18","container-text":"_container-text_183wa_24","container-button":"_container-button_183wa_30"};const s=l.exports.jsx,m=l.exports.jsxs,v=({latestImage:t,date:r,getLatestImage:n})=>m("div",{className:d.container,children:[m("div",{className:d["container-comand"],children:[s("p",{className:d["container-date"],children:r}),s("p",{className:d["container-text"],children:`V${t}`})]}),s("button",{className:d["container-button"],onClick:n,children:"Update"})]}),N=({device:t,command:r})=>{const[n,a]=i.exports.useState(".-.-.-"),[e,o]=i.exports.useState("--:--:--");i.exports.useEffect(()=>{g.addModuleDataListener(c)},[]);const c=async f=>{const u=b(f);if(u){a(u[1]);const p=E(u[0]);o(p)}};return s(v,{getLatestImage:async()=>{t&&(t==null||t.sendCommand(r,""))},date:e,latestImage:n})};function b(t){const r=Object.values(t.streams);if(r.length===0)throw new Error("No streams.");const n=r[0];if(n===void 0)throw new Error("No stream.");if(n.loading)return;if(n.tooMuchData)throw new Error("Too much data.");if(n.data.length===0)throw new Error("No data.");const a=n.data[0].points.at(-1);if(!a)throw new Error("No datapoints.");return a}const E=t=>`${new Date(t).getHours()}:${new Date(t).getMinutes()}:${new Date(t).getSeconds()} ${new Date(t).getHours()>=12?"pm":"am"}`;function j(){const[t,r]=i.exports.useState(void 0);i.exports.useEffect(()=>{n()},[]);const n=async()=>{if(await h.waitTilAuthenticated()){const a=await w.getCurrentDevice();r(a)}};return s("div",{className:"App",children:s(N,{device:t,command:"run_docker_script"})})}D.render(s(_.StrictMode,{children:s(j,{})}),document.getElementById("root"));
